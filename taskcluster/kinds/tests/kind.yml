loader: taskgraph.loader.transform:loader

transforms:
  - taskgraph.transforms.run
  - taskgraph.transforms.task
  - eije_taskgraph.transforms.common

kind-dependencies:
  - docker-image

task-defaults:
  worker-type: "linux-small"
  run-on-tasks-for: ["github-push"]
  run-on-git-branches: ["main"]
  worker:
    max-run-time: 1800
    docker-image: { in-tree: python-test }
  run:
    use-caches: [uv, checkout]
    using: run-task

tasks:
  githubscript:
    description: Runs python tests for githubscript
    run:
      command: |
        cd ${VCS_PATH}/githubscript && uv run pytest
  apdiffscript:
    description: Runs python tests for apdiffscript
    run:
      command: |
        cd ${VCS_PATH}/apdiffscript && uv run pytest
  scriptworker_common:
    description: Runs python tests for scriptworker_common
    run:
      command: |
        cd ${VCS_PATH}/common && uv run pytest



